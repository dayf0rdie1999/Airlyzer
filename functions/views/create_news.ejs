<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://kit.fontawesome.com/f6a55e21f3.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="styles/styles.css">
    <link rel="stylesheet" href="styles/create_styles.css">
    <title>Document</title>
</head>
<body>
    <%- include('./partials/header.ejs') %>

    <%- include('./partials/nav.ejs') %>

    <!-- Creating the body to create news -->
    <div class="create-news-content">
        <h3 class = "create-header">Create a Blog</h3>
        <form id= "created-news">
            <div class="title">
                <label for="title">Title:</label>
                <input type="text" id="title" name= "title"><br>
            </div>
            <div class="snippet">
                <label for="snippet">Snippet:</label>
                <input type="text" name="snippet" id="snippet"><br>
            </div>
            <div class="news-body">
                <label for="body">Body:</label>
                <textarea name="body" id="news-body" cols="30" rows="10"></textarea>
            </div>
            
            <!-- <label for="img">Select Image:</label>
            <input type="file" name="img" id="img" accept="image/*"> -->
        </form>
        <div class="submit-button">
            <button id='submit' onclick="saveNews()">Submit</button>
        </div>
        
    </div>
    
    <script>
        function saveNews() {
            // Add a new message entry to the database
            return firebase.firestore().collection('news') .add({
                name: firebase.auth().currentUser.displayName,
                title: document.getElementById('title').value,
                snippet: document.getElementById('snippet').value,
                content: document.getElementById('news-body').value,
                timestamp: firebase.firestore.FieldValue.serverTimestamp()
            }).then((result)=> {
                console.log(result);
                document.getElementById('title').value = '';
                document.getElementById('snippet').value = '';
                document.getElementById('news-body').value = '';
            })
            .catch((err)=> {
                console.error('Error writing new message to database', err);
            });
        }
    </script>

    <!-- Firebase SDK script and main.js script -->
    <%- include('./partials/firebase.ejs') %>
</body>
</html>